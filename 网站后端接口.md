# 网站后端接口

## 用户信息

### 1.新增用户信息（用作登录时调用，不存在才会新增，不论是否存在都返回用户信息）

url:/interface/member/addMember
请求方式：POST

请求参数：

| 字段           | 类型   | 是否必输 | 备注             |
| -------------- | ------ | -------- | ---------------- |
| wechatNickname | String | 否       | 微信昵称         |
| memberImgurl   | String | 否       | 用户头像         |
| memberName     | String | 否       | 用户名称         |
| memberPhone    | String | 否       | 用户联系电话     |
| memberEmail    | String | 否       | 用户联系邮箱     |
| code           | String | 是       | 微信临时登录凭证 |
| remark         | String | 否       | 备注（用户简介） |

{

  "wechatNickname":"kegemo",

  "memberImgurl":"www.baidu.com",

  "memberName":"xxx",

  "memberPhone":"18700003573",

  "memberEmail":"xxxxx@qq.com",

  "code":"0d1SRvFa1FWgqI0frCFa1XMyts0SRvFI"

}

返回格式：
{
    "msg": "操作成功",
    "code": 200,
    "data": {
        "createBy": null,
        "createTime": "2024-10-29 15:43:55",
        "updateBy": null,
        "updateTime": null,
        "remark": null,
        "memberId": 1,
        "wechatNickname": "kegemo",
        "openId": "obkWf7fCY3QCuSsJqNfNxbacvLcM",
        "memberImgurl": "www.baidu.com",
        "memberName": "xxx",
        "memberPhone": "18700003573",
        "memberEmail": "xxxxx@qq.com",
        "delFlag": "0",
        "code": null
    }
}





### 2.修改用户信息

url:/interface/member/editMember
请求方式：POST

请求参数：

| 字段           | 类型   | 是否必输 | 备注             |
| -------------- | ------ | -------- | ---------------- |
| wechatNickname | String | 否       | 微信昵称         |
| memberImgurl   | String | 否       | 用户头像         |
| memberName     | String | 否       | 用户名称         |
| memberPhone    | String | 否       | 用户联系电话     |
| memberEmail    | String | 否       | 用户联系邮箱     |
| memberId       | Long   | 是       | 用户id           |
| remark         | String | 否       | 备注（用户简介） |

请求格式：{

  "wechatNickname":"kegemo",

  "memberImgurl":"www.baidu.com",

  "memberName":"xxx",

  "memberPhone":"18700003573",

  "memberEmail":"xxxx@qq.com",

  "memberId":1

}



返回格式：
{
    "msg": "操作成功",
    "code": 200
}



### 3.获取用户详情

url:/interface/member/getMemberInfo?memberId=
请求方式：GET

请求参数：

| 字段     | 类型 | 是否必输 | 备注   |
| -------- | ---- | -------- | ------ |
| memberId | Long | 是       | 用户id |

返回格式：

{
    "msg": "操作成功",
    "code": 200,
    "data": {
        "createBy": null,
        "createTime": "2024-10-29 15:43:55",
        "updateBy": null,
        "updateTime": "2024-10-29 16:04:01",
        "remark": null,
        "memberId": 1,
        "wechatNickname": "kegemo",
        "openId": "xxxxxxxx",
        "memberImgurl": "www.baidu.com",
        "memberName": "xxx",
        "memberPhone": "18700003573",
        "memberEmail": "xxxxx@qq.com",
        "delFlag": "0",
        "code": null
    }
}



### 4.用户查看浏览记录（具体详细信息可以根据返回的imgentryId图片id调用图片详情接口查询）

url:/interface/memberBrowseLogs/selectMemberBrowseLogsByMemberId?memberId=
请求方式：GET

请求参数：

| 字段     | 类型 | 是否必输 | 备注   |
| -------- | ---- | -------- | ------ |
| memberId | Long | 是       | 用户id |

返回参数：

| 字段            | 类型   | 备注       |
| --------------- | ------ | ---------- |
| imgentryId      | Long   | 照片id     |
| actionTime      | Date   | 浏览时间   |
| entryimgName    | String | 照片名称   |
| entryimgIntro   | String | 照片背景   |
| entryimgHolder  | String | 照片作者   |
| entryimgType    | String | 照片类型   |
| entryimgThumurl | String | 照片缩略图 |

返回格式：

{

  "msg": "操作成功",

  "code": 200,

  "data": [

​    {

​      "createBy": **null**,

​      "createTime": **null**,

​      "updateBy": **null**,

​      "updateTime": **null**,

​      "remark": **null**,

​      "browseId": 2,

​      "imgentryId": 1,

​      "memberId": **null**,

​      "browserType": **null**,

​      "platform": **null**,

​      "deviceType": **null**,

​      "ipAddress": **null**,

​      "actionTime": "2024-10-30",

​      "entryimgName": "测试照片",

​      "entryimgIntro": "213",

​      "entryimgHolder": "龙",

​      "entryimgType": "风景",

​      "entryimgThumurl": **null**

​    },

​    {

​      "createBy": **null**,

​      "createTime": **null**,

​      "updateBy": **null**,

​      "updateTime": **null**,

​      "remark": **null**,

​      "browseId": 1,

​      "imgentryId": 1,

​      "memberId": **null**,

​      "browserType": **null**,

​      "platform": **null**,

​      "deviceType": **null**,

​      "ipAddress": **null**,

​      "actionTime": "2024-10-30",

​      "entryimgName": "测试照片",

​      "entryimgIntro": "213",

​      "entryimgHolder": "龙",

​      "entryimgType": "风景",

​      "entryimgThumurl": **null**

​    }

  ]

}



### 5.用户查看点赞记录（具体详细信息可以根据返回的imgentryId图片id调用图片详情接口查询）

url:/interface/memberBrowseLogs/selectMemberBrowseLogsByMemberId?memberId=
请求方式：GET

请求参数：

| 字段     | 类型 | 是否必输 | 备注   |
| -------- | ---- | -------- | ------ |
| memberId | Long | 是       | 用户id |

返回参数：

| 字段            | 类型   | 备注       |
| --------------- | ------ | ---------- |
| imgentryId      | Long   | 照片id     |
| actionTime      | Date   | 点赞时间   |
| entryimgName    | String | 照片名称   |
| entryimgIntro   | String | 照片背景   |
| entryimgHolder  | String | 照片作者   |
| entryimgType    | String | 照片类型   |
| entryimgThumurl | String | 照片缩略图 |



返回格式：

{

  "msg": "操作成功",

  "code": 200,

  "data": [

​    {

​      "createBy": **null**,

​      "createTime": **null**,

​      "updateBy": **null**,

​      "updateTime": **null**,

​      "remark": **null**,

​      "likeId": **null**,

​      "imgentryId": 1,

​      "memberId": **null**,

​      "actionFlag": **null**,

​      "actionTime": "2024-10-30",

​      "entryimgName": "测试照片",

​      "entryimgIntro": "213",

​      "entryimgHolder": "龙",

​      "entryimgType": "风景",

​      "entryimgThumurl": **null**

​    }

  ]

}



### 6.用户查看转发记录（具体详细信息可以根据返回的imgentryId图片id调用图片详情接口查询）

url:/interface/memberForwardLogs/selectMemberForwardLogsByMemberId?memberId=
请求方式：GET

请求参数：

| 字段     | 类型 | 是否必输 | 备注   |
| -------- | ---- | -------- | ------ |
| memberId | Long | 是       | 用户id |

返回参数：

| 字段            | 类型   | 备注       |
| --------------- | ------ | ---------- |
| imgentryId      | Long   | 照片id     |
| actionTime      | Date   | 转发时间   |
| entryimgName    | String | 照片名称   |
| entryimgIntro   | String | 照片背景   |
| entryimgHolder  | String | 照片作者   |
| entryimgType    | String | 照片类型   |
| entryimgThumurl | String | 照片缩略图 |

返回格式：

{

  "msg": "操作成功",

  "code": 200,

  "data": [

​    {

​      "createBy": **null**,

​      "createTime": **null**,

​      "updateBy": **null**,

​      "updateTime": **null**,

​      "remark": **null**,

​      "forwardId": **null**,

​      "imgentryId": 1,

​      "memberId": **null**,

​      "actionTime": "2024-10-30",

​      "entryimgName": "测试照片",

​      "entryimgIntro": "213",

​      "entryimgHolder": "龙",

​      "entryimgType": "风景",

​      "entryimgThumurl": **null**

​    }

  ]

}



### 7.用户查看评论记录（具体详细信息可以根据返回的imgentryId图片id调用图片详情接口查询）

url:/interface/memberCommentLogs/selectMemberCommentLogsByMemberId?memberId=
请求方式：GET

请求参数：

| 字段     | 类型 | 是否必输 | 备注   |
| -------- | ---- | -------- | ------ |
| memberId | Long | 是       | 用户id |

返回格式：

{

  "msg": "操作成功",

  "code": 200,

  "data": [

​    {

​      "createBy": **null**,

​      "createTime": **null**,

​      "updateBy": **null**,

​      "updateTime": **null**,

​      "remark": **null**,

​      "commentId": **null**,

​      "imgentryId": 1,

​      "memberId": **null**,

​      "wechatNickname": **null**,

​      "memberImgUrl": **null**,

​      "commentText": "这是一条测试评论",

​      "parentCommentId": **null**,

​      "actionTime": "2024-10-30",

​      "delFlag": **null**,

​      "status": **null**,

​      "reviewedBy": **null**,

​      "reviewedTime": **null**,

​      "reviewedInfo": **null**,

​      "replies": [],

​      "entryimgName": "测试照片",

​      "entryimgIntro": "213",

​      "entryimgHolder": "龙",

​      "entryimgType": "风景",

​      "entryimgThumurl": **null**

​    },

​    {

​      "createBy": **null**,

​      "createTime": **null**,

​      "updateBy": **null**,

​      "updateTime": **null**,

​      "remark": **null**,

​      "commentId": **null**,

​      "imgentryId": 1,

​      "memberId": **null**,

​      "wechatNickname": **null**,

​      "memberImgUrl": **null**,

​      "commentText": "是多少发多少",

​      "parentCommentId": **null**,

​      "actionTime": "2024-10-08",

​      "delFlag": **null**,

​      "status": **null**,

​      "reviewedBy": **null**,

​      "reviewedTime": **null**,

​      "reviewedInfo": **null**,

​      "replies": [],

​      "entryimgName": "测试照片",

​      "entryimgIntro": "213",

​      "entryimgHolder": "龙",

​      "entryimgType": "风景",

​      "entryimgThumurl": **null**

​    },

​    {

​      "createBy": **null**,

​      "createTime": **null**,

​      "updateBy": **null**,

​      "updateTime": **null**,

​      "remark": **null**,

​      "commentId": **null**,

​      "imgentryId": 1,

​      "memberId": **null**,

​      "wechatNickname": **null**,

​      "memberImgUrl": **null**,

​      "commentText": "是多少发多少",

​      "parentCommentId": **null**,

​      "actionTime": "2024-10-08",

​      "delFlag": **null**,

​      "status": **null**,

​      "reviewedBy": **null**,

​      "reviewedTime": **null**,

​      "reviewedInfo": **null**,

​      "replies": [],

​      "entryimgName": "测试照片",

​      "entryimgIntro": "213",

​      "entryimgHolder": "龙",

​      "entryimgType": "风景",

​      "entryimgThumurl": **null**

​    },

​    {

​      "createBy": **null**,

​      "createTime": **null**,

​      "updateBy": **null**,

​      "updateTime": **null**,

​      "remark": **null**,

​      "commentId": **null**,

​      "imgentryId": 1,

​      "memberId": **null**,

​      "wechatNickname": **null**,

​      "memberImgUrl": **null**,

​      "commentText": "是多少发多少",

​      "parentCommentId": **null**,

​      "actionTime": "2024-10-08",

​      "delFlag": **null**,

​      "status": **null**,

​      "reviewedBy": **null**,

​      "reviewedTime": **null**,

​      "reviewedInfo": **null**,

​      "replies": [],

​      "entryimgName": "测试照片",

​      "entryimgIntro": "213",

​      "entryimgHolder": "龙",

​      "entryimgType": "风景",

​      "entryimgThumurl": **null**

​    }

  ]

}



### 8.用户查看上传照片记录

url:/interface/imageEntrySubmit/selectImageEntrySubmitByMemberId?memberId=
请求方式：GET

请求参数：

| 字段     | 类型 | 是否必输 | 备注   |
| -------- | ---- | -------- | ------ |
| memberId | Long | 是       | 用户id |



返回参数：

| 字段              | 类型   | 备注                                  |
| ----------------- | ------ | ------------------------------------- |
| imgsubmitId       | Long   | 提交照片id                            |
| memberId          | String | 用户id                                |
| submitimgName     | String | 照片名称                              |
| submitimgTime     | String | 发生时间（关联tagstime_list表id）     |
| tagstimeTitle     | String | 时间名称                              |
| submitimgPosition | String | 发生地点（关联locationtags_list表id） |
| locationName      | String | 地点名称                              |
| submitimgIntro    | String | 背景描述                              |
| submitimgHolder   | String | 照片作者                              |
| submitimgType     | String | 照片类别（字典 archiveimg_type）      |
| submitimgUrl      | String | 照片url                               |
| status            | String | 状态（0草稿 1待审核 2被驳回 9已通过） |
| reviewedBy        | String | 审核者                                |
| reviewedTime      | Date   | 审核时间                              |
| reviewedInfo      | String | 审核意见                              |



返回格式：

{

  "msg": "操作成功",

  "code": 200,

  "data": [

​    {

​      "createBy": **null**,

​      "createTime": **null**,

​      "updateBy": **null**,

​      "updateTime": **null**,

​      "remark": "1234567",

​      "imgsubmitId": 1,

​      "memberId": "1",

​      "submitimgName": "测试照片",

​      "submitimgTime": "60年代",

​      "tagstimeTitle": **null**,

​      "submitimgPosition": "长沙",

​      "locationName": **null**,

​      "submitimgIntro": "321",

​      "submitimgHolder": "龙",

​      "submitimgType": "摄影",

​      "submitimgUrl": "http://192.168.0.115:9066/profile/upload/2024/10/29/login_left_20241029102508A001.jpg",

​      "status": "9",

​      "delFlag": **null**,

​      "reviewedBy": "long",

​      "reviewedTime": "2024-10-29",

​      "reviewedInfo": "123"

​    },

​    {

​      "createBy": **null**,

​      "createTime": **null**,

​      "updateBy": **null**,

​      "updateTime": **null**,

​      "remark": **null**,

​      "imgsubmitId": 2,

​      "memberId": "1",

​      "submitimgName": "照片名称",

​      "submitimgTime": "1",

​      "tagstimeTitle": "测试时间标签",

​      "submitimgPosition": "1",

​      "locationName": "湖南省",

​      "submitimgIntro": "背景描述",

​      "submitimgHolder": "照片作者",

​      "submitimgType": "照片类别",

​      "submitimgUrl": "照片url",

​      "status": "1",

​      "delFlag": **null**,

​      "reviewedBy": **null**,

​      "reviewedTime": **null**,

​      "reviewedInfo": **null**

​    }

  ]

}



### 9.用户查看公示照片大众修订记录

url:/interface/imageEntryRevision/selectImageEntryRevisionByMemberId?memberId=
请求方式：GET

请求参数：

| 字段     | 类型 | 是否必输 | 备注   |
| -------- | ---- | -------- | ------ |
| memberId | Long | 是       | 用户id |



返回参数：

| 字段                   | 类型   | 备注                                                   |
| ---------------------- | ------ | ------------------------------------------------------ |
| imgrevisionId          | Long   | 修订记录主键id                                         |
| memberId               | String | 用户id                                                 |
| imgentryId             | Long   | 照片id                                                 |
| entryimgName           | String | 照片名称                                               |
| tagstimeTitle          | String | 时间名称                                               |
| locationName           | String | 地域名称                                               |
| entryimgIntro          | String | 照片背景                                               |
| entryimgHolder         | String | 拍摄者                                                 |
| entryimgType           | String | 照片类型                                               |
| entryimgNameFlag       | String | 照片名称修改标志(1=修改,0=未修改)                      |
| newEntryimgName        | String | 新照片名称                                             |
| entryimgTimeFlag       | String | 发生时间修改标志(1=修改,0=未修改)                      |
| newEntryimgTime        | String | 新发生时间id（关联tagstime_list表id）                  |
| newTagsTimeTitle       | String | 新发生时间名称                                         |
| entryimgPositionFlag   | String | 发生地点修改标志(1=修改,0=未修改)                      |
| newSubmitimgPosition   | String | 新发生地点id（关联locationtags_list表）                |
| newLocationName        | String | 新发生地名称                                           |
| submitimgNewintroFlag  | String | 背景描述修改标志(1=修改,0=未修改)                      |
| newSubmitimgNewintro   | String | 新背景描述                                             |
| submitimgNewholderFlag | String | 照片作者修改标志(1=修改,0=未修改)                      |
| newSubmitimgNewholder  | String | 新照片作者                                             |
| submitimgNewtypeFlag   | String | 照片类别修改标志(1=修改,0=未修改)                      |
| newSubmitimgNewtype    | String | 新照片类别                                             |
| status                 | String | 状态（0=草稿,1=待审核,2=被驳回,8=部分采用,9=全部采用） |
| reviewedBy             | String | 审核者                                                 |
| reviewedTime           | Date   | 审核时间                                               |
| reviewedInfo           | String | 审核意见                                               |



返回格式：

{
    "msg": "操作成功",
    "code": 200,
    "data": [
        {
            "createBy": null,
            "createTime": null,
            "updateBy": null,
            "updateTime": null,
            "remark": "fdgfdfghhfg",
            "imgrevisionId": 1,
            "memberId": "1",
            "imgentryId": 0,
            "entryimgName": null,
            "tagstimeTitle": null,
            "locationName": null,
            "entryimgIntro": null,
            "entryimgHolder": null,
            "entryimgType": null,
            "entryimgNameFlag": "1",
            "newEntryimgName": "照片1",
            "entryimgTimeFlag": "1",
            "newEntryimgTime": "60年代",
            "newTagsTimeTitle": null,
            "entryimgPositionFlag": "1",
            "newSubmitimgPosition": "长沙",
            "newLocationName": null,
            "submitimgNewintroFlag": "1",
            "newSubmitimgNewintro": "123",
            "submitimgNewholderFlag": "1",
            "newSubmitimgNewholder": "long",
            "submitimgNewtypeFlag": "1",
            "newSubmitimgNewtype": "类别一",
            "status": "1",
            "delFlag": null,
            "reviewedBy": "admin",
            "reviewedTime": "2024-10-29",
            "reviewedInfo": "sadfds"
        },
        {
            "createBy": null,
            "createTime": null,
            "updateBy": null,
            "updateTime": null,
            "remark": null,
            "imgrevisionId": 2,
            "memberId": "1",
            "imgentryId": 1,
            "entryimgName": "测试照片",
            "tagstimeTitle": "测试时间标签",
            "locationName": "湖南省",
            "entryimgIntro": "213",
            "entryimgHolder": "龙",
            "entryimgType": "风景",
            "entryimgNameFlag": "1",
            "newEntryimgName": "新照片名称",
            "entryimgTimeFlag": "1",
            "newEntryimgTime": "1",
            "newTagsTimeTitle": "测试时间标签",
            "entryimgPositionFlag": "1",
            "newSubmitimgPosition": "2",
            "newLocationName": "长沙市",
            "submitimgNewintroFlag": "1",
            "newSubmitimgNewintro": "新背景描述",
            "submitimgNewholderFlag": "1",
            "newSubmitimgNewholder": "新照片作者",
            "submitimgNewtypeFlag": "1",
            "newSubmitimgNewtype": "1",
            "status": "1",
            "delFlag": null,
            "reviewedBy": null,
            "reviewedTime": null,
            "reviewedInfo": null
        }
    ]
}



### 10.用户查看公示照片标签大众修订记录

url:/interface/imageEntryRevision/selectImageEntryRevisionByMemberId?memberId=
请求方式：GET

请求参数：

| 字段     | 类型 | 是否必输 | 备注   |
| -------- | ---- | -------- | ------ |
| memberId | Long | 是       | 用户id |

返回参数：

| 字段              | 类型   | 备注                                              |
| ----------------- | ------ | ------------------------------------------------- |
| imgtagsRevisionid | Long   | 修订记录id                                        |
| memberId          | String | 用户id                                            |
| tagsIds           | String | 标签ID集合（关联tags_list表，多个以逗号分隔）     |
| tagTitles         | String | 标签名称（多个以逗号分隔）                        |
| status            | String | 状态（0草稿 1待审核 2被驳回 8部分采用 9全部采用） |
| reviewedBy        | String | 审核者                                            |
| reviewedTime      | Date   | 审核时间                                          |
| reviewedInfo      | String | 审核意见                                          |



返回格式：

{

  "msg": "操作成功",

  "code": 200,

  "data": [

​    {

​      "createBy": **null**,

​      "createTime": **null**,

​      "updateBy": **null**,

​      "updateTime": **null**,

​      "remark": "备注",

​      "imgtagsRevisionid": **null**,

​      "memberId": "1",

​      "tagsIds": "1,2",

​      "tagTitles": "测试标签,毛田相关",

​      "status": "1",

​      "delFlag": **null**,

​      "reviewedBy": **null**,

​      "reviewedTime": **null**,

​      "reviewedInfo": **null**

​    }

  ]

}



## 标签列表

### 1.获取关键字标签列表（查询所有状态正常，未删除的标签，按照显示顺序排正序）

url:/interface/tagsList/selectTagsListEasy
请求方式：GET

返回参数：

| 字段         | 类型    | 备注     |
| ------------ | ------- | -------- |
| tagsId       | Integer | 标签id   |
| tagsTitle    | String  | 标签名称 |
| tagsCategory | String  | 标签分类 |
| tagsBrief    | String  | 标签描述 |
| orderNum     | Integer | 显示顺序 |

|      |
| ---- |

返回格式：
{
    "msg": "操作成功",
    "code": 200,
    "data": [
        {
            "createBy": null,
            "createTime": null,
            "updateBy": null,
            "updateTime": null,
            "remark": null,
            "tagsId": 1,
            "tagsTitle": "测试标签",
            "tagsCategory": "标签一",
            "tagsBrief": "啊实打实的",
            "orderNum": 1,
            "status": null,
            "delFlag": null
        }
    ]
}



### 2.获取地域标签列表（查询所有状态正常，未删除的标签，树状返回）

url:/interface/locationtagsList/selectLocationTagsListEasy
请求方式：GET

返回参数：

| 字段                | 类型                   | 备注       |
| ------------------- | ---------------------- | ---------- |
| tagslocationId      | Long                   | 标签id     |
| ancestors           | String                 | 祖级列表   |
| locationName        | String                 | 地域名称   |
| locationOldnamelist | String                 | 旧地名列表 |
| locationIntro       | String                 | 地名描述   |
| locationIdx         | String                 | 经纬度坐标 |
| children            | List<LocationtagsList> | 子节       |

返回格式：
{
    "msg": "操作成功",
    "code": 200,
    "data": [
        {
            "createBy": null,
            "createTime": null,
            "updateBy": null,
            "updateTime": null,
            "remark": "湖南省",
            "tagslocationId": 1,
            "parentId": 0,
            "ancestors": null,
            "locationName": "湖南省",
            "orderNum": 1,
            "locationOldnamelist": "湖南省",
            "locationIntro": "湖南省",
            "locationIdx": "121212,5454545",
            "status": null,
            "delFlag": null,
            "children": [
                {
                    "createBy": null,
                    "createTime": null,
                    "updateBy": null,
                    "updateTime": null,
                    "remark": "长沙市",
                    "tagslocationId": 2,
                    "parentId": 1,
                    "ancestors": null,
                    "locationName": "长沙市",
                    "orderNum": 1,
                    "locationOldnamelist": "长沙市",
                    "locationIntro": "长沙市",
                    "locationIdx": "32434,09565",
                    "status": null,
                    "delFlag": null,
                    "children": []
                }
            ]
        }
    ]
}





### 3.获取时间标签列表（查询所有状态正常，未删除的标签，按照显示顺序排正序）

url:/interface/tagstimeList/selectTagstimeListEasy
请求方式：GET

返回参数：

| 字段             | 类型    | 备注         |
| ---------------- | ------- | ------------ |
| tagstimeId       | Long    | 标签id       |
| tagstimeTitle    | String  | 时间标签名称 |
| tagstimeCategory | String  | 时间标签分类 |
| orderNum         | Integer | 显示顺序     |



返回格式：
{
    "msg": "操作成功",
    "code": 200,
    "data": [
        {
            "createBy": null,
            "createTime": null,
            "updateBy": null,
            "updateTime": null,
            "remark": null,
            "tagstimeId": 1,
            "tagstimeTitle": "测试时间标签",
            "tagstimeCategory": "1950-1960",
            "orderNum": 1,
            "status": null,
            "delFlag": null
        }
    ]
}





## 公式图片列表

### 1.根据关键字标签id或者时间标签id或者地域标签id查询公式图片

url:/interface/imageEntry/selectImageEntryListByTagsIdOrTagslocationIdOrTagstimeId
请求方式：POST

请求参数：（每次请求该接口，根据实际需要的参数传递，可以都传，若都没传则查出全部公式图片列表）

| 字段           | 类型    | 是否必输 | 备注         |
| -------------- | ------- | -------- | ------------ |
| tagsId         | Integer | 否       | 关键字标签id |
| tagslocationId | Long    | 否       | 地域标签id   |
| tagstimeId     | Long    | 否       | 时间标签id   |



返回参数：

| 字段                | 类型    | 备注                       |
| ------------------- | ------- | -------------------------- |
| imgentryId          | Long    | 照片ID                     |
| entryimgName        | String  | 照片名称                   |
| tagstimeTitle       | String  | 时间标签名称               |
| tagstimeCategory    | String  | 时间标签类型               |
| locationName        | String  | 地域名称                   |
| locationOldNameList | String  | 旧地名列表                 |
| locationIntro       | String  | 地名描述                   |
| locationIdx         | String  | 经纬度坐标                 |
| entryimgIntro       | String  | 背景描述                   |
| entryimgHolder      | String  | 照片作者                   |
| entryimgType        | String  | 照片类别                   |
| entryimgThumurl     | String  | 缩略图图片url              |
| entryimgCommonurl   | String  | 列表图片url                |
| entryimgPrimalurl   | String  | 原图图片url                |
| entryimgIdx         | String  | 经纬度坐标                 |
| archiveFlag         | String  | 归档状态 1=已归档,0=未归档 |
| archiveId           | Long    | 影像档案ID                 |
| browseCount         | Integer | 浏览数                     |
| likeCount           | Integer | 点赞数                     |
| forwardCount        | Integer | 转发数                     |
| commentCount        | Integer | 评论数                     |
| tagsTitle           | String  | 关键字标签名称             |
| tagsCategory        | String  | 关键字标签类型             |
| tagsBrief           | String  | 关键字标签描述             |



返回格式：

{
    "msg": "操作成功",
    "code": 200,
    "data": [
        {
            "createBy": null,
            "createTime": null,
            "updateBy": null,
            "updateTime": null,
            "remark": "321",
            "imgentryId": 1,
            "entryimgName": "测试照片",
            "entryimgTime": null,
            "tagstimeTitle": "测试时间标签",
            "tagstimeCategory": "1950-1960",
            "entryimgPosition": null,
            "locationName": "湖南省",
            "locationOldNameList": "湖南省",
            "locationIntro": "湖南省",
            "locationIdx": "121212,5454545",
            "entryimgIntro": "213",
            "entryimgHolder": "龙",
            "entryimgType": "风景",
            "entryimgThumurl": null,
            "entryimgCommonurl": null,
            "entryimgPrimalurl": "http://192.168.0.115:9066/profile/upload/2024/10/29/login_left_20241029102508A001.jpg",
            "entryimgIdx": "222，333",
            "archiveFlag": "1",
            "archiveId": 1,
            "status": null,
            "delFlag": null,
            "browseCount": 1,
            "likeCount": 1,
            "forwardCount": 1,
            "commentCount": 1
        },
        {
            "createBy": null,
            "createTime": null,
            "updateBy": null,
            "updateTime": null,
            "remark": "321",
            "imgentryId": 2,
            "entryimgName": "测试照片",
            "entryimgTime": null,
            "tagstimeTitle": "测试时间标签",
            "tagstimeCategory": "1950-1960",
            "entryimgPosition": null,
            "locationName": "长沙市",
            "locationOldNameList": "长沙市",
            "locationIntro": "长沙市",
            "locationIdx": "32434,09565",
            "entryimgIntro": "213",
            "entryimgHolder": "龙",
            "entryimgType": "风景",
            "entryimgThumurl": null,
            "entryimgCommonurl": null,
            "entryimgPrimalurl": "http://192.168.0.115:9066/profile/upload/2024/10/29/login_left_20241029102508A001.jpg",
            "entryimgIdx": "222，333",
            "archiveFlag": "1",
            "archiveId": 1,
            "status": null,
            "delFlag": null,
            "browseCount": 1,
            "likeCount": 1,
            "forwardCount": 1,
            "commentCount": 1
        }
    ]
}



### 2.根据图片id查询图片详情和公示照片文件

url:/interface/imageEntry/selectImageEntryDetails?imgentryId=
请求方式：GET

请求参数：

| 字段       | 类型 | 是否必输 | 备注   |
| ---------- | ---- | -------- | ------ |
| imgentryId | Long | 是       | 图片id |



返回参数:

| 字段                  | 类型                     | 备注                |
| --------------------- | ------------------------ | ------------------- |
| entryimgName          | String                   | 照片名称            |
| entryimgIntro         | String                   | 背景描述            |
| tagstimeTitle         | String                   | 时间标签            |
| entryimgHolder        | String                   | 拍摄者              |
| locationName          | String                   | 发生地点            |
| tagsTitles            | List<String>             | 关键字标签名列表    |
| memberCommentLogsList | List<MemberCommentLogs>  | 照片评论回复列表    |
| commentId             | Long                     | 评论id              |
| imgentryId            | Long                     | 照片ID              |
| memberId              | String                   | 用户ID 为空即为游客 |
| wechatNickname        | String                   | 微信昵称            |
| memberImgUrl          | String                   | 用户头像            |
| commentText           | String                   | 评论内容            |
| actionTime            | Date                     | 评论时间            |
| replies               | List<MemberCommentLogs>  | 用于存储子评论      |
| imageEntryFileInfos   | List<ImageEntryFileInfo> | 公示照片文件列表    |
| fileName              | String                   | 文件名称            |
| fileIdentifier        | String                   | 后缀                |
| fileSize              | Long                     | 大小                |
| filePath              | String                   | 素材路径            |
| fileTime              | Date                     | 上传时间            |



返回格式：

{
    "msg": "操作成功",
    "code": 200,
    "data": {
        "createBy": null,
        "createTime": null,
        "updateBy": null,
        "updateTime": null,
        "remark": null,
        "imgentryId": null,
        "entryimgName": "测试照片",
        "entryimgTime": null,
        "tagstimeTitle": "测试时间标签",
        "tagstimeCategory": null,
        "entryimgPosition": null,
        "locationName": "湖南省",
        "locationOldNameList": null,
        "locationIntro": null,
        "locationIdx": null,
        "entryimgIntro": "213",
        "entryimgHolder": "龙",
        "entryimgType": null,
        "entryimgThumurl": null,
        "entryimgCommonurl": null,
        "entryimgPrimalurl": null,
        "entryimgIdx": null,
        "archiveFlag": null,
        "archiveId": null,
        "status": null,
        "delFlag": null,
        "browseCount": 2,
        "likeCount": 2,
        "forwardCount": 2,
        "commentCount": null,
        "tagsTitle": null,
        "tagsCategory": null,
        "tagsBrief": null,
        "imgentryIdList": null,
        "tagsTitles": [
            "测试标签"
        ],
        "memberCommentLogsList": [
            {
                "createBy": null,
                "createTime": null,
                "updateBy": null,
                "updateTime": null,
                "remark": null,
                "commentId": 1,
                "imgentryId": 1,
                "memberId": "1",
                "wechatNickname": "kegemo",
                "memberImgUrl": "www.baidu.com",
                "commentText": "是多少发多少",
                "parentCommentId": 0,
                "actionTime": "2024-10-08",
                "delFlag": null,
                "status": null,
                "reviewedBy": null,
                "reviewedTime": null,
                "reviewedInfo": null,
                "replies": [
                    {
                        "createBy": null,
                        "createTime": null,
                        "updateBy": null,
                        "updateTime": null,
                        "remark": null,
                        "commentId": 2,
                        "imgentryId": 1,
                        "memberId": "1",
                        "wechatNickname": "kegemo",
                        "memberImgUrl": "www.baidu.com",
                        "commentText": "是多少发多少",
                        "parentCommentId": 1,
                        "actionTime": "2024-10-08",
                        "delFlag": null,
                        "status": null,
                        "reviewedBy": null,
                        "reviewedTime": null,
                        "reviewedInfo": null,
                        "replies": [
                            {
                                "createBy": null,
                                "createTime": null,
                                "updateBy": null,
                                "updateTime": null,
                                "remark": null,
                                "commentId": 3,
                                "imgentryId": 1,
                                "memberId": "1",
                                "wechatNickname": "kegemo",
                                "memberImgUrl": "www.baidu.com",
                                "commentText": "是多少发多少",
                                "parentCommentId": 2,
                                "actionTime": "2024-10-08",
                                "delFlag": null,
                                "status": null,
                                "reviewedBy": null,
                                "reviewedTime": null,
                                "reviewedInfo": null,
                                "replies": []
                            }
                        ]
                    }
                ]
            }
        ],
        "imageEntryFileInfos": [
            {
                "createBy": null,
                "createTime": null,
                "updateBy": null,
                "updateTime": null,
                "remark": null,
                "entryimgfileId": 1,
                "imgentryId": 1,
                "fileName": "xxxx.png",
                "fileIdentifier": "png",
                "fileSize": 3,
                "filePath": "http://xxxx/",
                "fileTime": "2024-10-31",
                "delFlag": "0"
            }
        ]
    }
}





## 交互动作

### 1.新增点赞记录（点赞或者取消点赞动作会让照片的like_count会相应变化）

url:/interface/memberLikeLogs/addMemberLikeLog
请求方式：POST

请求参数：

| 字段       | 类型   | 是否必输 | 备注                    |
| ---------- | ------ | -------- | ----------------------- |
| imgentryId | Long   | 是       | 图片id                  |
| memberId   | String | 否       | 用户id（为空即为游客）  |
| actionFlag | String | 是       | 动作  1=点赞,0=取消点赞 |
|            |        |          |                         |

请求格式：{

  "imgentryId":1,

  "memberId":1,

  "actionFlag":0

}

返回格式：
{
    "msg": "操作成功",
    "code": 200
}

### 2.新增转发记录（转发动作会让照片的forward_count会相应变化）

url:/interface/memberForwardLogs/addMemberForwardLogs
请求方式：POST

请求参数：

| 字段       | 类型   | 是否必输 | 备注                   |
| ---------- | ------ | -------- | ---------------------- |
| imgentryId | Long   | 是       | 图片id                 |
| memberId   | String | 否       | 用户id（为空即为游客） |

请求格式：

{

  "imgentryId":1,

  "memberId":1

}



返回格式：

{

  "msg": "操作成功",

  "code": 200

}



### 3.新增浏览记录（浏览动作会让照片的browse_count会相应变化）

url:/interface/memberBrowseLogs/addMemberBrowseLogs
请求方式：POST

请求参数：

| 字段       | 类型   | 是否必输 | 备注                   |
| ---------- | ------ | -------- | ---------------------- |
| imgentryId | Long   | 是       | 图片id                 |
| memberId   | String | 否       | 用户id（为空即为游客） |

请求格式：{

  "imgentryId":1,

  "memberId":1

}

返回格式：
{
    "msg": "操作成功",
    "code": 200
}



### 4.新增评论记录（评论动作会让照片的comment_count会相应变化）

url:/interface/memberCommentLogs/addMemberCommentLogs
请求方式：POST

请求参数：

| 字段            | 类型   | 是否必输 | 备注                                                    |
| --------------- | ------ | -------- | ------------------------------------------------------- |
| imgentryId      | Long   | 是       | 图片id                                                  |
| memberId        | String | 否       | 用户id（为空即为游客）                                  |
| commentText     | String | 是       | 评论内容                                                |
| parentCommentId | Long   | 是       | 父评论ID（如果是评论则传0，回复则传回复的那一条评论id） |

请求格式：

{

  "imgentryId":1,

  "memberId":1,

  "commentText":"这是一条测试评论",

  "parentCommentId":0

}

返回格式：{

  "msg": "操作成功",

  "code": 200

}





## 大众参与

### 1.上传照片至OSS

url:/common/common/webAliyunUpload
请求方式：POST

请求参数：

| 字段 | 类型 | 是否必输 | 备注 |
| ---- | ---- | -------- | ---- |
| file | File | 是       | 文件 |

返回参数：

| 字段          | 类型   | 备注        |
| :------------ | ------ | ----------- |
| submitimgName | String | 照片名称    |
| submitimgUrl  | String | 照片url地址 |



{

  "msg": "操作成功",

  "code": 200,

  "data": {

​    "submitimgName": "9e08ab1c-3aa6-4763-bcc1-fc3301e97129.jpg",

​    "submitimgUrl": "https://hnimagearchive.oss-cn-heyuan.aliyuncs.com/hnimagearchive/image/9e08ab1c-3aa6-4763-bcc1-fc3301e97129.jpg",

  }

}



### 2.新增用户上传照片记录

url:/interface/imageEntrySubmit/addImageEntrySubmit
请求方式：POST

请求参数：

| 字段              | 类型   | 是否必输 | 备注                             |
| ----------------- | ------ | -------- | -------------------------------- |
| memberId          | String | 是       | 用户id                           |
| submitimgName     | String | 是       | 照片名称                         |
| submitimgTime     | String | 否       | 发生时间（关联时间标签id）       |
| submitimgPosition | String | 否       | 发生地点（关联地域标签id）       |
| submitimgIntro    | String | 否       | 背景描述                         |
| submitimgHolder   | String | 否       | 照片作者                         |
| submitimgType     | String | 否       | 照片类别（字典 archiveimg_type） |
| submitimgUrl      | String | 否       | 照片url                          |

请求格式：{

  "submitimgName":"照片名称",

  "submitimgTime":1,

  "submitimgPosition":1,

  "submitimgIntro":"背景描述",

  "submitimgHolder":"照片作者",

  "submitimgType":"照片类别",

  "submitimgUrl":"照片url",

  "memberId":"1"

}

返回格式：{

  "msg": "操作成功",

  "code": 200

}





### 3.新增公示照片大众修订记录

url:/interface/imageEntryRevision/addImageEntryRevision
请求方式：POST

请求参数：

| 字段                   | 类型   | 是否必输 | 备注                              |
| ---------------------- | ------ | -------- | --------------------------------- |
| imgentryId             | Long   | 是       | 照片id                            |
| memberId               | String | 是       | 用户id                            |
| entryimgNameFlag       | String | 否       | 照片名称修改标志(1=修改,0=未修改) |
| newEntryimgName        | String | 否       | 新照片名称                        |
| entryimgTimeFlag       | String | 否       | 发生时间修改标志(1=修改,0=未修改) |
| newEntryimgTime        | String | 否       | 新发生时间(时间标签id)            |
| entryimgPositionFlag   | String | 否       | 发生地点修改标志(1=修改,0=未修改) |
| newSubmitimgPosition   | String | 否       | 新发生地点(地域标签id)            |
| submitimgNewintroFlag  | String | 否       | 背景描述修改标志(1=修改,0=未修改) |
| newSubmitimgNewintro   | String | 否       | 新背景描述                        |
| submitimgNewholderFlag | String | 否       | 照片作者修改标志(1=修改,0=未修改) |
| newSubmitimgNewholder  | String | 否       | 新照片作者                        |
| submitimgNewtypeFlag   | String | 否       | 照片类别修改标志(1=修改,0=未修改) |
| newSubmitimgNewtype    | String | 否       | 新照片类别（字典archiveimg_type） |
| remark                 | String | 否       | 备注                              |
| createBy               | String | 否       | 创建者                            |

请求格式：{

  "imgentryId":1,

  "memberId":"1",

  "entryimgNameFlag":"1",

  "newEntryimgName":"新照片名称",

  "entryimgTimeFlag":1,

  "newEntryimgTime":1,

  "entryimgPositionFlag":1,

  "newSubmitimgPosition":2,

  "submitimgNewintroFlag":1,

  "newSubmitimgNewintro":"新背景描述",

  "submitimgNewholderFlag":1,

  "newSubmitimgNewholder":"新照片作者",

  "submitimgNewtypeFlag":1,

  "newSubmitimgNewtype":1,

  "createBy":"创建者"

  "remark":"备注"

}



返回格式：

返回格式：{

  "msg": "操作成功",

  "code": 200

}





### 4.新增公示照片标签大众修订记录

url:/interface/imageEntryTagsRevision/addImageEntryTagsRevision
请求方式：POST

请求参数：

| 字段     | 类型   | 是否必输 | 备注                                         |
| -------- | ------ | -------- | -------------------------------------------- |
| tagsIds  | String | 是       | 标签ID集合（关联tags_list表,多个以逗号分隔） |
| memberId | String | 是       | 用户id                                       |
| remark   | String | 否       | 备注                                         |

请求格式：{

  "tagsIds":"1,2",

  "remark":"备注",

  "memberId":"1"

}

返回格式：

{

  "msg": "操作成功",

  "code": 200

}

